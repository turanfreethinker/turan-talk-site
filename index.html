<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Turan Talk | Reason, Freethinking, Critical Thinking, and Awareness</title>
  <meta name="description" content="Turan Talk! Here you will have access to my podcast hosted by myself and Arman, my articles and various discussions on freedom of thought and belief. IT IS FREE AND WILL ALWAYS BE. Enjoy!." />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%235b8cff'/%3E%3Ctext x='50' y='58' font-size='40' text-anchor='middle' fill='white'%3ET%3C/text%3E%3C/svg%3E" />
  <link rel="stylesheet" href="/style.css?v=2" />
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="container nav">
      <a href="/" class="brand"><span class="brand-badge">T</span> Turan Talk</a>
      <nav class="nav-links">
        <a href="#podcasts">Podcasts</a>
        <a href="#articles">Articles</a>
        <a href="#about">About</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="glow"></div>
    <div class="container hero-grid">
      <div>
        <h1>Welcome to <span style="color:var(--brand)">Turan Talk</span></h1>
        <p class="lead">Reason, Freethinking, Critical Thinking, and Awareness, all in one place.</p>
        <div class="hero-cta">
          <a href="#podcasts" class="button primary">🎙 Listen to Podcasts</a>
          <a href="#articles" class="button ghost">📖 Read Articles</a>
        </div>
      </div>
      <div>
        <!-- This image is replaced by CMS data -->
        <img id="bannerImage" src="https://via.placeholder.com/1000x420?text=Your+Banner" alt="Banner image" class="float" />
      </div>
    </div>
  </section>

  <!-- About -->
  <section class="section" id="about">
    <div class="container">
      <h2 class="section-title">About Me</h2>
      <div class="profile">
        <!-- This image and text are replaced by CMS data -->
        <img id="profileImage" src="https://via.placeholder.com/200?text=Profile" alt="Profile picture" class="avatar" />
        <div>
          <p class="name">Turan Freethinker</p>
          <p id="bioText" class="bio">Host of Turan Talk, I share podcasts, articles, and discussions on freedom of thought and belief.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Podcasts -->
  <section class="section" id="podcasts">
    <div class="container">
      <h2 class="section-title">Podcasts</h2>
      <p class="section-sub">Latest episodes from Turan Talk</p>
      <div id="podList" class="pod-list"></div>
    </div>
  </section>

  <!-- Articles -->
  <section class="section" id="articles">
    <div class="container">
      <h2 class="section-title">Articles</h2>
      <p class="section-sub">Thoughts, essays, and reflections</p>
      <div id="articlesGrid" class="grid cols-3"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container grid cols-2">
      <div><p>&copy; 2025 Turan Talk. All rights reserved.</p></div>
      <div class="socials">
        <a href="https://youtube.com" target="_blank">📺 YouTube</a>
        <a href="https://twitter.com" target="_blank">🐦 Twitter</a>
        <a href="https://github.com/turanfreethinker" target="_blank">💻 GitHub</a>
      </div>
    </div>
  </footer>

  <!-- Load data from CMS JSON and render, no more manual edits needed -->
  <script>
  (async () => {
    try {
      const res = await fetch('/content/home.json?v=' + Date.now());
      if (!res.ok) return;
      const data = await res.json();

      // Banner, profile, bio
      const banner = document.getElementById('bannerImage');
      const avatar = document.getElementById('profileImage');
      const bio = document.getElementById('bioText');
      if (banner && data.banner_image) banner.src = data.banner_image;
      if (avatar && data.profile_image) avatar.src = data.profile_image;
      if (bio && data.bio) bio.textContent = data.bio;

      // Podcasts
      const podList = document.getElementById('podList');
      if (podList && Array.isArray(data.podcasts)) {
        podList.innerHTML = data.podcasts.map(p => `
          <div class="pod-item">
            ${p.cover_image ? `<img src="${p.cover_image}" class="thumb" alt="Episode cover" loading="lazy" decoding="async" width="64" height="64">` : ''}
            <div class="meta">
              <strong>${p.title || ''}</strong><br>
              <small>${p.date || ''}${p.length ? ' · ' + p.length : ''}</small>
            </div>
            <div class="actions">
              ${p.url ? `<a href="${p.url}" class="button primary">▶ Play</a>` : ''}
            </div>
          </div>
        `).join('');
      }

      // Articles
      const articlesGrid = document.getElementById('articlesGrid');
      if (articlesGrid && Array.isArray(data.articles)) {
        articlesGrid.innerHTML = data.articles.map(a => `
          <div class="card">
            ${a.image ? `<img src="${a.image}" alt="Article banner" loading="lazy" decoding="async" width="400" height="250">` : ''}
            <div class="body">
              <div class="eyebrow">${a.category || ''}</div>
              <h3>${a.title || ''}</h3>
              <p>${a.summary || ''}</p>
              ${a.url ? `<p><a href="${a.url}" class="button ghost">Open</a></p>` : ''}
            </div>
          </div>
        `).join('');
      }
    } catch (e) { console.error(e); }
  })();
  </script>
</body>
</html>
